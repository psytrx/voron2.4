[gcode_macro POST_PROBE]
gcode:
    {% if printer.toolhead.position.z < 50 %}
        G90    ; absolute positioning
        G0 Z50 ; move up to make some safety distance to the bed
    {% endif %}

    {% if printer["gcode_macro PRE_PROBE"].target_temp > 0 %}
        M109 S{printer["gcode_macro PRE_PROBE"].target_temp}
    {% endif %}

    RESTORE_GCODE_STATE NAME=PRE_PROBE
